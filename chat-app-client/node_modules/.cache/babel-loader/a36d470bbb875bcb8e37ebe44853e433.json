{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05E0\\u05E8\\u05D9\\u05D4\\\\Desktop\\\\web-socket-app\\\\chat-app-client\\\\src\\\\chat\\\\Components\\\\Initialization.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useContext } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { AuthContext } from '../Components/AuthContext';\nimport Loader from \"./Loader\";\nimport { updateTokens } from \"../DAL/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Initialization() {\n  _s();\n\n  const ctx = useContext(AuthContext);\n  const dispatch = useDispatch();\n\n  const login = () => {\n    dispatch({\n      type: 'LOGIN'\n    });\n  };\n\n  const logout = () => {\n    dispatch({\n      type: 'LOGOUT'\n    });\n  };\n\n  const start = () => {\n    dispatch({\n      type: 'START'\n    });\n  };\n\n  useEffect(() => {\n    (async () => {\n      const {\n        accessToken\n      } = await updateTokens();\n\n      if (accessToken) {\n        login();\n        ctx.refreshToken(accessToken);\n      } else {\n        logout();\n      }\n\n      setTimeout(() => {\n        start();\n      }, 5000);\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Initialization, \"CzPNNkvEhDy+BKirBtGyRXWvRgw=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Initialization;\nexport default Initialization;\n\nvar _c;\n\n$RefreshReg$(_c, \"Initialization\");","map":{"version":3,"sources":["C:/Users/נריה/Desktop/web-socket-app/chat-app-client/src/chat/Components/Initialization.js"],"names":["useEffect","useContext","useDispatch","AuthContext","Loader","updateTokens","Initialization","ctx","dispatch","login","type","logout","start","accessToken","refreshToken","setTimeout"],"mappings":";;;AAAA,SAAQA,SAAR,EAAmBC,UAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAAQC,YAAR,QAA2B,YAA3B;;;;AAGA,SAASC,cAAT,GAAyB;AAAA;;AAErB,QAAMC,GAAG,GAAGN,UAAU,CAACE,WAAD,CAAtB;AAEA,QAAMK,QAAQ,GAAGN,WAAW,EAA5B;;AAEA,QAAMO,KAAK,GAAG,MAAM;AAChBD,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACH,GAFD;;AAIA,QAAMC,MAAM,GAAG,MAAM;AACjBH,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACH,GAFD;;AAIA,QAAME,KAAK,GAAG,MAAM;AAChBJ,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACH,GAFD;;AAIAV,EAAAA,SAAS,CAAC,MAAI;AACV,KAAC,YAAU;AACP,YAAM;AAACa,QAAAA;AAAD,UAAgB,MAAMR,YAAY,EAAxC;;AACA,UAAGQ,WAAH,EAAgB;AACZJ,QAAAA,KAAK;AACLF,QAAAA,GAAG,CAACO,YAAJ,CAAiBD,WAAjB;AACH,OAHD,MAGO;AACHF,QAAAA,MAAM;AACT;;AACDI,MAAAA,UAAU,CAAC,MAAI;AACXH,QAAAA,KAAK;AACR,OAFS,EAEP,IAFO,CAAV;AAGH,KAXD;AAYH,GAbQ,EAaP,EAbO,CAAT;AAeA,sBAAO;AAAA,2BACH,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AADG,mBAAP;AAGH;;GApCQN,c;UAIYJ,W;;;KAJZI,c;AAsCT,eAAeA,cAAf","sourcesContent":["import {useEffect, useContext} from \"react\"; \r\nimport { useDispatch } from \"react-redux\";\r\nimport { AuthContext } from '../Components/AuthContext'\r\nimport Loader from \"./Loader\";\r\nimport {updateTokens} from \"../DAL/api\"\r\n\r\n\r\nfunction Initialization(){\r\n\r\n    const ctx = useContext(AuthContext)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const login = () => {\r\n        dispatch({type: 'LOGIN'})\r\n    }\r\n\r\n    const logout = () => {\r\n        dispatch({type: 'LOGOUT'})\r\n    }\r\n\r\n    const start = () => {\r\n        dispatch({type: 'START'})\r\n    }\r\n\r\n    useEffect(()=>{\r\n        (async ()=>{\r\n            const {accessToken} = await updateTokens()\r\n            if(accessToken) {\r\n                login()\r\n                ctx.refreshToken(accessToken)\r\n            } else {\r\n                logout()\r\n            }\r\n            setTimeout(()=>{\r\n                start()\r\n            }, 5000)\r\n        })()\r\n    },[])\r\n\r\n    return <>\r\n        <Loader/>\r\n    </>\r\n}\r\n\r\nexport default Initialization"]},"metadata":{},"sourceType":"module"}