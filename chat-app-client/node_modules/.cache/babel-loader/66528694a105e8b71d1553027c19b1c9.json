{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms new/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms new/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms new/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms new/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Form,Button,Row,Col,Container}from\"react-bootstrap\";import{useState}from\"react\";import{validation,userName,email,password,confirmPassword}from\"../Utils/validation\";import{register}from\"../DAL/authenticationApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),validMessage=_useState4[0],setValidMessage=_useState4[1];var _useState5=useState({userName:userName,email:_objectSpread(_objectSpread({},email),{},{inValid:false,value:\"\",error:[]}),password:_objectSpread(_objectSpread({},password),{},{inValid:false,value:\"\",error:[]}),confirmPassword:_objectSpread(_objectSpread({},confirmPassword),{},{inValid:false,value:\"\",error:[]})}),_useState6=_slicedToArray(_useState5,2),registerInputsDetails=_useState6[0],setRegisterInputsDetails=_useState6[1];function submit(_x){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var isValid,user,key,response,_yield$response$json,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();isValid=true;user={};for(key in registerInputsDetails){user[key]=registerInputsDetails[key].value;setRegisterInputsDetails(validation({value:registerInputsDetails[key].value,name:key},registerInputsDetails,\"register\"));if(registerInputsDetails[key].errors.length!==0){isValid=false;}}if(!isValid){_context.next=13;break;}_context.next=7;return register(user);case 7:response=_context.sent;_context.next=10;return response.json();case 10:_yield$response$json=_context.sent;message=_yield$response$json.message;if(response.ok){setValidMessage(message);}else{setErrorMessage(message);setTimeout(function(){setErrorMessage(\"\");},4500);}case 13:case\"end\":return _context.stop();}}},_callee);}));return _submit.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{className:\"container-base mt-4\",children:/*#__PURE__*/_jsxs(Form,{className:\"form-base\",children:[!validMessage&&/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mt-3 mb-4\",children:\"Register\"}),/*#__PURE__*/_jsxs(Col,{xs:10,md:8,lg:5,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{id:\"userName\",type:\"text\",name:\"userName\",isInvalid:registerInputsDetails[\"userName\"].inValid,placeholder:\"Username\",onBlur:function onBlur(e){setRegisterInputsDetails(validation(e.target,registerInputsDetails,\"register\"));}}),registerInputsDetails[\"userName\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",isInvalid:registerInputsDetails[\"email\"].inValid,placeholder:\"Email\",onBlur:function onBlur(e){setRegisterInputsDetails(validation(e.target,registerInputsDetails,\"register\"));}}),registerInputsDetails[\"email\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]})]}),/*#__PURE__*/_jsxs(Col,{xs:10,md:8,lg:5,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",isInvalid:registerInputsDetails[\"password\"].inValid,placeholder:\"Password\",onBlur:function onBlur(e){setRegisterInputsDetails(validation(e.target,registerInputsDetails,\"register\"));}}),registerInputsDetails[\"password\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"confirmPassword\",isInvalid:registerInputsDetails[\"confirmPassword\"].inValid,placeholder:\"Confirm password\",onBlur:function onBlur(e){setRegisterInputsDetails(validation(e.target,registerInputsDetails,\"register\"));}}),registerInputsDetails[\"confirmPassword\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{className:\"btn-base mb-3\",variant:\"dark\",type:\"submit\",onClick:function onClick(e){return submit(e);},children:\"Register\"})}),/*#__PURE__*/_jsx(Row,{className:\"message-base justify-content-center align-items-center\",children:errorMessage&&/*#__PURE__*/_jsx(\"small\",{children:errorMessage})})]}),validMessage&&/*#__PURE__*/_jsxs(Row,{className:\"valid-register\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"register-valid-message-header mt-4 text-center\",children:validMessage}),/*#__PURE__*/_jsx(\"h4\",{className:\"register-valid-message-confirm text-center\",children:\"In order to complete the sign-up process, please click the confirmation link in your inbox\"})]})]})})});}export default Register;","map":{"version":3,"sources":["C:/Users/נריה/Desktop/chat rooms new/chat-app-client/src/chat/Components/Register.js"],"names":["Form","Button","Row","Col","Container","useState","validation","userName","email","password","confirmPassword","register","Register","errorMessage","setErrorMessage","validMessage","setValidMessage","inValid","value","error","registerInputsDetails","setRegisterInputsDetails","submit","e","preventDefault","isValid","user","key","name","errors","length","response","json","message","ok","setTimeout","target","map","index"],"mappings":"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","sourcesContent":["import {Form, Button, Row, Col, Container} from \"react-bootstrap\"\r\nimport {useState} from \"react\"\r\nimport {validation, userName, email, password, confirmPassword} from \"../Utils/validation\"\r\nimport {register} from \"../DAL/authenticationApi\"\r\n\r\nfunction Register(){\r\n\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n    const [validMessage, setValidMessage] = useState(\"\")\r\n    const [registerInputsDetails, setRegisterInputsDetails] = useState({ \r\n        userName,\r\n        email: {...email, inValid: false, value: \"\", error: []},\r\n        password: {...password, inValid: false, value: \"\", error: []},\r\n        confirmPassword: {...confirmPassword, inValid: false, value: \"\", error: []}\r\n        })\r\n\r\n    async function submit(e){\r\n        e.preventDefault()\r\n\r\n        let isValid = true\r\n        let user = {}\r\n\r\n       for (const key in registerInputsDetails) {\r\n\r\n            user[key] = registerInputsDetails[key].value\r\n            setRegisterInputsDetails(validation({value:registerInputsDetails[key].value,name:key},registerInputsDetails, \"register\"))\r\n            if (registerInputsDetails[key].errors.length !==0){\r\n                isValid = false\r\n            }\r\n        }\r\n\r\n        if(isValid){\r\n            const response = await register(user)\r\n            const {message} = await response.json()\r\n            if(response.ok){\r\n                setValidMessage(message)\r\n            } else {\r\n                setErrorMessage(message)\r\n                setTimeout(()=>{\r\n                    setErrorMessage(\"\")\r\n                }, 4500)\r\n            }     \r\n        }\r\n    }\r\n\r\n\r\n    return<>\r\n        <Container className=\"container-base mt-4\">\r\n            <Form className=\"form-base\"> \r\n\r\n                {!validMessage&&\r\n                <Row className=\"justify-content-center\">\r\n                    <h1 className=\"text-center mt-3 mb-4\">Register</h1>\r\n\r\n                    <Col xs={10} md={8} lg={5}>\r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control id=\"userName\" type=\"text\" name=\"userName\" isInvalid={registerInputsDetails[\"userName\"].inValid} placeholder=\"Username\"\r\n                            onBlur={(e)=>{setRegisterInputsDetails(validation(e.target, registerInputsDetails, \"register\"))}}/>\r\n                            {registerInputsDetails[\"userName\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n\r\n                \r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control type=\"email\" name=\"email\" isInvalid={registerInputsDetails[\"email\"].inValid} placeholder=\"Email\"\r\n                            onBlur={(e)=>{setRegisterInputsDetails(validation(e.target, registerInputsDetails, \"register\"))}}/>\r\n                            {registerInputsDetails[\"email\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n                    </Col>\r\n                \r\n                    <Col xs={10} md={8} lg={5}>  \r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control type=\"password\" name=\"password\" isInvalid={registerInputsDetails[\"password\"].inValid} placeholder=\"Password\"\r\n                            onBlur={(e)=>{setRegisterInputsDetails(validation(e.target, registerInputsDetails, \"register\"))}}/>\r\n                            {registerInputsDetails[\"password\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n                \r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control type=\"password\" name=\"confirmPassword\" isInvalid={registerInputsDetails[\"confirmPassword\"].inValid} placeholder=\"Confirm password\"\r\n                            onBlur={(e)=>{setRegisterInputsDetails(validation(e.target, registerInputsDetails, \"register\"))}}/>\r\n                            {registerInputsDetails[\"confirmPassword\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n            \r\n                    </Col>\r\n\r\n                    <div className=\"text-center\">\r\n                            <Button className=\"btn-base mb-3\" variant=\"dark\" type=\"submit\" onClick={(e)=>submit(e)}>\r\n                                Register\r\n                            </Button>\r\n                    </div>\r\n\r\n                    <Row className=\"message-base justify-content-center align-items-center\">\r\n                    {errorMessage&&<small>{errorMessage}</small>}\r\n                    </Row>\r\n                    \r\n                </Row>}\r\n\r\n\r\n                {validMessage&&\r\n                <Row className=\"valid-register\">\r\n                    <h1 className=\"register-valid-message-header mt-4 text-center\">{validMessage}</h1>\r\n                    <h4 className=\"register-valid-message-confirm text-center\">In order to complete the sign-up process, please click the confirmation link in your inbox</h4>\r\n                </Row>}\r\n                \r\n            </Form>\r\n        </Container>\r\n    </>\r\n}\r\n\r\nexport default Register"]},"metadata":{},"sourceType":"module"}