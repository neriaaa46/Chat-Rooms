{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms/chatRoomsFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms/chatRoomsFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms/chatRoomsFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms/chatRoomsFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Form,Button,Row,Col,Container}from\"react-bootstrap\";import{useState}from\"react\";import{useParams,useHistory}from\"react-router\";import{confirmPassword,password,validation}from\"../Utils/validation\";import{changePassword}from\"../DAL/authenticationApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ResetPassword(){var _useParams=useParams(),token=_useParams.token;var history=useHistory();var _useState=useState({password:_objectSpread(_objectSpread({},password),{},{inValid:false,value:\"\",error:[]}),confirmPassword:_objectSpread(_objectSpread({},confirmPassword),{},{inValid:false,value:\"\",error:[]})}),_useState2=_slicedToArray(_useState,2),resetPassword=_useState2[0],setResetPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];function submit(_x){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var isValid,reset,key,response,_yield$response$json,_message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();isValid=true;reset={};for(key in resetPassword){reset[key]=resetPassword[key].value;setResetPassword(validation({value:resetPassword[key].value,name:key},resetPassword,\"login\"));if(resetPassword[key].errors.length!==0){isValid=false;}}if(!isValid){_context.next=15;break;}reset[\"token\"]=token;_context.next=8;return changePassword(reset);case 8:response=_context.sent;_context.next=11;return response.json();case 11:_yield$response$json=_context.sent;_message=_yield$response$json.message;setMessage(_message);if(response.ok){setTimeout(function(){setMessage(\"\");history.push(\"/login\");},3000);}else{setTimeout(function(){setMessage(\"\");},3000);}case 15:case\"end\":return _context.stop();}}},_callee);}));return _submit.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{className:\"container-base mt-4\",children:/*#__PURE__*/_jsxs(Form,{className:\"form-base\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mt-3 mb-4\",children:\"Reset Password\"}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{xs:11,md:8,lg:6,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",isInvalid:resetPassword[\"password\"].inValid,placeholder:\"Password\",onBlur:function onBlur(e){setResetPassword(validation(e.target,resetPassword,\"resetPassword\"));}}),resetPassword[\"password\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"input-base\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"confirmPassword\",isInvalid:resetPassword[\"confirmPassword\"].inValid,placeholder:\"Confirm Password\",onBlur:function onBlur(e){setResetPassword(validation(e.target,resetPassword,\"resetPassword\"));}}),resetPassword[\"confirmPassword\"].errors.map(function(value,index){return/*#__PURE__*/_jsxs(Form.Control.Feedback,{className:\"feedback\",type:\"invalid\",children:[\" \",value,\" \"]},index);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{className:\"btn-base mb-3\",variant:\"dark\",type:\"submit\",onClick:function onClick(e){return submit(e);},children:\"Submit\"})})]}),/*#__PURE__*/_jsx(Row,{className:\"message-base justify-content-center align-items-center mb-3\",children:message&&/*#__PURE__*/_jsx(\"small\",{children:message})})]})]})})});}export default ResetPassword;","map":{"version":3,"sources":["C:/Users/נריה/Desktop/chat rooms/chatRoomsFrontend/src/chat/Components/ResetPassword.js"],"names":["Form","Button","Row","Col","Container","useState","useParams","useHistory","confirmPassword","password","validation","changePassword","ResetPassword","token","history","inValid","value","error","resetPassword","setResetPassword","message","setMessage","submit","e","preventDefault","isValid","reset","key","name","errors","length","response","json","ok","setTimeout","push","target","map","index"],"mappings":"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","sourcesContent":["import {Form, Button, Row, Col, Container} from \"react-bootstrap\"\r\nimport { useState } from \"react\"\r\nimport { useParams, useHistory } from \"react-router\"\r\nimport { confirmPassword, password, validation } from \"../Utils/validation\"\r\nimport {changePassword} from \"../DAL/authenticationApi\"\r\n\r\nfunction ResetPassword(){\r\n\r\n    let { token } = useParams()\r\n    const history = useHistory()\r\n\r\n    const [resetPassword, setResetPassword] = useState({\r\n        password: {...password, inValid: false, value: \"\", error: []}, \r\n        confirmPassword: {...confirmPassword, inValid: false, value: \"\", error: []}\r\n    })\r\n\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n\r\n    async function submit(e){\r\n        e.preventDefault()\r\n        let isValid = true\r\n            let reset = {}\r\n    \r\n           for (const key in resetPassword) {\r\n    \r\n            reset[key] = resetPassword[key].value\r\n                setResetPassword(validation({value:resetPassword[key].value,name:key},resetPassword, \"login\"))\r\n                if (resetPassword[key].errors.length !==0){\r\n                    isValid = false\r\n                }\r\n            }\r\n    \r\n            if(isValid){\r\n                reset[\"token\"] = token\r\n                const response = await changePassword(reset)\r\n                const {message} = await response.json()\r\n                setMessage(message)\r\n                if(response.ok){\r\n                    setTimeout(()=>{\r\n                        setMessage(\"\")\r\n                        history.push(\"/login\")\r\n                    }, 3000)\r\n                } else {\r\n                    setTimeout(()=>{\r\n                        setMessage(\"\")\r\n                    }, 3000)\r\n                }\r\n                \r\n            }\r\n    }\r\n\r\n\r\n\r\n    return <>\r\n         <Container className=\"container-base mt-4\">\r\n            <Form className=\"form-base\"> \r\n                <h1 className=\"text-center mt-3 mb-4\">Reset Password</h1>\r\n                <Row className=\"justify-content-center\">\r\n\r\n                    <Col xs={11} md={8} lg={6}>\r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control type=\"password\" name=\"password\" isInvalid={resetPassword[\"password\"].inValid} placeholder=\"Password\"\r\n                            onBlur={(e)=>{setResetPassword(validation(e.target,resetPassword, \"resetPassword\"))}}/>\r\n                            {resetPassword[\"password\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"input-base\">\r\n                            <Form.Control type=\"password\" name=\"confirmPassword\" isInvalid={resetPassword[\"confirmPassword\"].inValid} placeholder=\"Confirm Password\"\r\n                            onBlur={(e)=>{setResetPassword(validation(e.target,resetPassword, \"resetPassword\"))}}/>\r\n                            {resetPassword[\"confirmPassword\"].errors.map((value,index)=>\r\n                            {return <Form.Control.Feedback className=\"feedback\" key={index} type=\"invalid\"> {value} </Form.Control.Feedback>})}\r\n                        </Form.Group>\r\n\r\n\r\n                        <div className=\"text-center\">\r\n                            <Button className=\"btn-base mb-3\" variant=\"dark\" type=\"submit\" onClick={(e)=>submit(e)}>\r\n                                Submit\r\n                            </Button>\r\n                        </div>\r\n                    </Col>\r\n\r\n                    <Row className=\"message-base justify-content-center align-items-center mb-3\">\r\n                        {message&&<small>{message}</small>}\r\n                    </Row>\r\n\r\n                </Row>\r\n            </Form>\r\n        </Container>\r\n    </>\r\n}\r\n\r\nexport default ResetPassword"]},"metadata":{},"sourceType":"module"}