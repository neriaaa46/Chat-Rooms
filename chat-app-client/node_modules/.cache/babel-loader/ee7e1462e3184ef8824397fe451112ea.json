{"ast":null,"code":"import _slicedToArray from \"C:/Users/\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/chat rooms/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction InfiniteScrollReverse(_ref) {\n  var className = _ref.className,\n      isLoading = _ref.isLoading,\n      hasMore = _ref.hasMore,\n      loadArea = _ref.loadArea,\n      loadMore = _ref.loadMore,\n      children = _ref.children;\n  var infiniteRef = useRef();\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPage = _useState2[0],\n      setCurrentPage = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scrollPosition = _useState4[0],\n      setScrollPosition = _useState4[1]; // Reset default page, if children equals to 0\n\n\n  useEffect(function () {\n    if (children.length === 0) {\n      setCurrentPage(1);\n    }\n  }, [children.length]);\n  useEffect(function () {\n    var scrollContainer = infiniteRef.current;\n\n    function onScroll() {\n      // Handle scroll direction\n      if (scrollContainer.scrollTop > scrollPosition) {// Scroll bottom\n      } else {\n        // Check load more scroll area\n        if (scrollContainer.scrollTop <= loadArea && !isLoading) {\n          // Check for available data\n          if (hasMore) {\n            // Run data fetching\n            var nextPage = currentPage + 1;\n            setCurrentPage(nextPage);\n            loadMore(nextPage);\n          }\n        }\n      } // Save event scroll position\n\n\n      setScrollPosition(scrollContainer.scrollTop);\n    }\n\n    scrollContainer.addEventListener(\"scroll\", onScroll);\n    return function () {\n      scrollContainer.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [currentPage, hasMore, isLoading, loadArea, loadMore, scrollPosition]);\n  useEffect(function () {\n    var scrollContainer = infiniteRef.current;\n\n    if (children.length) {\n      // Get available top scroll\n      var availableScroll = scrollContainer.scrollHeight - scrollContainer.clientHeight; // Get motion for first page\n\n      if (currentPage === 1) {\n        // Move data to bottom for getting load more area\n        if (availableScroll >= 0) {\n          scrollContainer.scrollTop = availableScroll;\n        }\n      } else {\n        // Add scroll area for other pages\n        if (hasMore) {\n          scrollContainer.scrollTop = scrollContainer.clientHeight;\n        }\n      }\n    }\n  }, [children.length, currentPage, hasMore]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    ref: infiniteRef\n  }, children);\n}\n\nInfiniteScrollReverse.propTypes = {\n  className: PropTypes.string.isRequired,\n  children: PropTypes.array,\n  hasMore: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  loadMore: PropTypes.func.isRequired,\n  loadArea: PropTypes.number\n};\nInfiniteScrollReverse.defaultProps = {\n  className: \"InfiniteScrollReverse\",\n  children: [],\n  loadArea: 30\n};\nexport default InfiniteScrollReverse;","map":{"version":3,"sources":["C:/Users/נריה/Desktop/chat rooms/Frontend/node_modules/react-infinite-scroll-reverse/dist/InfiniteScrollReverse.js"],"names":["React","useEffect","useRef","useState","PropTypes","InfiniteScrollReverse","className","isLoading","hasMore","loadArea","loadMore","children","infiniteRef","currentPage","setCurrentPage","scrollPosition","setScrollPosition","length","scrollContainer","current","onScroll","scrollTop","nextPage","addEventListener","removeEventListener","availableScroll","scrollHeight","clientHeight","createElement","ref","propTypes","string","isRequired","array","bool","func","number","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction InfiniteScrollReverse({\n  className,\n  isLoading,\n  hasMore,\n  loadArea,\n  loadMore,\n  children\n}) {\n  const infiniteRef = useRef();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [scrollPosition, setScrollPosition] = useState(0); // Reset default page, if children equals to 0\n\n  useEffect(() => {\n    if (children.length === 0) {\n      setCurrentPage(1);\n    }\n  }, [children.length]);\n  useEffect(() => {\n    let {\n      current: scrollContainer\n    } = infiniteRef;\n\n    function onScroll() {\n      // Handle scroll direction\n      if (scrollContainer.scrollTop > scrollPosition) {// Scroll bottom\n      } else {\n        // Check load more scroll area\n        if (scrollContainer.scrollTop <= loadArea && !isLoading) {\n          // Check for available data\n          if (hasMore) {\n            // Run data fetching\n            const nextPage = currentPage + 1;\n            setCurrentPage(nextPage);\n            loadMore(nextPage);\n          }\n        }\n      } // Save event scroll position\n\n\n      setScrollPosition(scrollContainer.scrollTop);\n    }\n\n    scrollContainer.addEventListener(\"scroll\", onScroll);\n    return () => {\n      scrollContainer.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [currentPage, hasMore, isLoading, loadArea, loadMore, scrollPosition]);\n  useEffect(() => {\n    let {\n      current: scrollContainer\n    } = infiniteRef;\n\n    if (children.length) {\n      // Get available top scroll\n      const availableScroll = scrollContainer.scrollHeight - scrollContainer.clientHeight; // Get motion for first page\n\n      if (currentPage === 1) {\n        // Move data to bottom for getting load more area\n        if (availableScroll >= 0) {\n          scrollContainer.scrollTop = availableScroll;\n        }\n      } else {\n        // Add scroll area for other pages\n        if (hasMore) {\n          scrollContainer.scrollTop = scrollContainer.clientHeight;\n        }\n      }\n    }\n  }, [children.length, currentPage, hasMore]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    ref: infiniteRef\n  }, children);\n}\n\nInfiniteScrollReverse.propTypes = {\n  className: PropTypes.string.isRequired,\n  children: PropTypes.array,\n  hasMore: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  loadMore: PropTypes.func.isRequired,\n  loadArea: PropTypes.number\n};\nInfiniteScrollReverse.defaultProps = {\n  className: \"InfiniteScrollReverse\",\n  children: [],\n  loadArea: 30\n};\nexport default InfiniteScrollReverse;"]},"metadata":{},"sourceType":"module"}