(this["webpackJsonpchat-app-client"]=this["webpackJsonpchat-app-client"]||[]).push([[0],{197:function(e,t,n){},198:function(e,t,n){},207:function(e,t){},209:function(e,t){},222:function(e,t){},224:function(e,t){},252:function(e,t){},254:function(e,t){},255:function(e,t){},260:function(e,t){},262:function(e,t){},268:function(e,t){},270:function(e,t){},289:function(e,t){},301:function(e,t){},304:function(e,t){},325:function(e,t,n){"use strict";n.r(t);n(111);var a=n(2),r=n.n(a),s=n(39),c=n.n(s),i=(n(197),n(198),n(13)),o=n(26),l=n(327),u=n(1);var j=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(l.a,{children:[Object(u.jsx)("h1",{className:"header text-center",children:"Chat Application"}),Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsx)("div",{className:"welcome-msg",children:Object(u.jsx)("p",{children:"Welcome, to get started you need to log in, if you have not yet registered you must register for the site."})})})]})})},d=n(5),m=n.n(d),b=n(14),h=n(3),p=n(11),O=n(333),f=n(328),x=n(176),v=n(329);function g(e,t,n){var a=e.value,r=e.name,s=[],c=!1,i=t[r].validations;return"userName"!==r&&"email"!==r&&"roomName"!==r||(a=a.trim()),i.required&&!a&&(s.push("\u05e0\u05d3\u05e8\u05e9 - ".concat(t[r].name)),c=!0),i.pattern&&!i.pattern.test(a)&&(s.push("".concat(t[r].name," - ").concat(t[r].appropriateError)),c=!0),"confirmPassword"===r&&t.password.value!==a&&(s.push("\u05d0\u05d9\u05df \u05d4\u05ea\u05d0\u05de\u05d4 \u05dc\u05e1\u05d9\u05e1\u05de\u05d0 \u05e9\u05e0\u05d1\u05d7\u05e8\u05d4"),c=!0),"register"!==n&&"resetPassword"!==n||"password"!==r||!t.confirmPassword.value||t.confirmPassword.value===a||0!==t.confirmPassword.errors.length?"register"!==n&&"resetPassword"!==n||"password"!==r||!t.confirmPassword.value||t.confirmPassword.value!==a||(t.confirmPassword.errors=[],t.confirmPassword.inValid=!1):(t.confirmPassword.errors.push("\u05d0\u05d9\u05df \u05d4\u05ea\u05d0\u05de\u05d4 \u05dc\u05e1\u05d9\u05e1\u05de\u05d0 \u05e9\u05e0\u05d1\u05d7\u05e8\u05d4"),t.confirmPassword.inValid=!0),t[r].inValid=c,t[r].value=a,t[r].errors=s,Object(h.a)({},t)}var N={value:"",name:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9",inValid:!1,appropriateError:"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d5\u05e1\u05e4\u05e8\u05d5\u05ea \u05d1\u05dc\u05d1\u05d3",errors:[],validations:{required:!0,pattern:/^[a-zA-Z0-9 \u0590-\u05fe]+$/i}},w={value:"",name:"\u05d3\u05d5\u05d0\u05e8 \u05d0\u05dc\u05e7\u05d8\u05e8\u05d5\u05e0\u05d9",inValid:!1,appropriateError:"\u05dc\u05d0 \u05ea\u05e7\u05d9\u05df",errors:[],validations:{required:!0,pattern:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/}},y={value:"",name:"\u05e1\u05d9\u05e1\u05de\u05d0",inValid:!1,appropriateError:"\u05dc\u05e4\u05d7\u05d5\u05ea 6 \u05ea\u05d5\u05d5\u05d9\u05dd \u05e2\u05dd \u05d0\u05d5\u05ea (\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea) \u05d5\u05e1\u05e4\u05e8\u05d4",errors:[],validations:{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.{6,})/}},k={value:"",name:"\u05d0\u05d9\u05de\u05d5\u05ea \u05e1\u05d9\u05e1\u05de\u05d0",inValid:!1,errors:[],validations:{required:!0}},C={value:"",name:"\u05e9\u05dd \u05d7\u05d3\u05e8",inValid:!1,appropriateError:"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea (\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea) \u05d5\u05e1\u05e4\u05e8\u05d5\u05ea",errors:[],validations:{required:!0,pattern:/^[a-zA-Z0-9 ]+$/i}},T="https://chat-rooms-web.herokuapp.com/api";function P(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/users/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/users/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/refreshToken"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(T,"/users/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/email/resetPassword"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/users/changePassword"),{method:"PUT",cardentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(p.a)(s,2),i=c[0],o=c[1],j=Object(a.useState)({userName:N,email:Object(h.a)(Object(h.a)({},w),{},{inValid:!1,value:"",error:[]}),password:Object(h.a)(Object(h.a)({},y),{},{inValid:!1,value:"",error:[]}),confirmPassword:Object(h.a)(Object(h.a)({},k),{},{inValid:!1,value:"",error:[]})}),d=Object(p.a)(j,2),C=d[0],T=d[1];function S(){return(S=Object(b.a)(m.a.mark((function e(t){var n,a,s,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t.preventDefault(),n=!0,a={},C)a[s]=C[s].value,T(g({value:C[s].value,name:s},C,"register")),0!==C[s].errors.length&&(n=!1);if(!n){e.next=13;break}return e.next=7,P(a);case 7:return c=e.sent,e.next=10,c.json();case 10:i=e.sent,l=i.message,c.ok?o(l):(r(l),setTimeout((function(){r("")}),4500));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"container-base mt-4",children:Object(u.jsxs)(O.a,{className:"form-base",children:[!i&&Object(u.jsxs)(f.a,{className:"justify-content-center",children:[Object(u.jsx)("h1",{className:"text-center mt-3 mb-4",children:"Register"}),Object(u.jsxs)(x.a,{xs:10,md:8,lg:5,children:[Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{id:"userName",type:"text",name:"userName",isInvalid:C.userName.inValid,placeholder:"Username",onBlur:function(e){T(g(e.target,C,"register"))}}),C.userName.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"email",name:"email",isInvalid:C.email.inValid,placeholder:"Email",onBlur:function(e){T(g(e.target,C,"register"))}}),C.email.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]})]}),Object(u.jsxs)(x.a,{xs:10,md:8,lg:5,children:[Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"password",name:"password",isInvalid:C.password.inValid,placeholder:"Password",onBlur:function(e){T(g(e.target,C,"register"))}}),C.password.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"password",name:"confirmPassword",isInvalid:C.confirmPassword.inValid,placeholder:"Confirm password",onBlur:function(e){T(g(e.target,C,"register"))}}),C.confirmPassword.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]})]}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)(v.a,{className:"btn-base mb-3",variant:"dark",type:"submit",onClick:function(e){return function(e){return S.apply(this,arguments)}(e)},children:"Register"})}),Object(u.jsx)(f.a,{className:"message-base justify-content-center align-items-center",children:n&&Object(u.jsx)("small",{children:n})})]}),i&&Object(u.jsxs)(f.a,{className:"valid-register",children:[Object(u.jsx)("h1",{className:"register-valid-message-header mt-4 text-center",children:i}),Object(u.jsx)("h4",{className:"register-valid-message-confirm text-center",children:"In order to complete the sign-up process, please click the confirmation link in your inbox"})]})]})})})},D=n(32),J=n(80),U=n.n(J),q="",M=Object(a.createContext)({refreshToken:function(){}});function Z(e){var t=e.children,n=Object(i.g)(),a=Object(o.b)();return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(M.Provider,{value:{refreshToken:function e(t){q=t;var r=U.a.decode(t);setTimeout(Object(b.a)(m.a.mark((function t(){var r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(q);case 2:r=t.sent,(s=r.accessToken)?e(s):(a({type:"LOGOUT"}),n.push("/login"));case 5:case"end":return t.stop()}}),t)}))),1e3*(r.exp-r.iat-180))}},children:t})})}var $=function(){var e=Object(i.g)(),t=Object(o.b)(),n=Object(a.useContext)(M),r=function(){t({type:"LOGIN"})},s=Object(a.useState)(""),c=Object(p.a)(s,2),j=c[0],d=c[1],N=Object(a.useState)({email:Object(h.a)(Object(h.a)({},w),{},{inValid:!1,value:"",error:[]}),password:Object(h.a)(Object(h.a)({},y),{},{inValid:!1,value:"",error:[]})}),k=Object(p.a)(N,2),C=k[0],T=k[1];function P(){return(P=Object(b.a)(m.a.mark((function t(a){var s,c,i,o,l,u,j;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in a.preventDefault(),s=!0,c={},C)c[i]=C[i].value,T(g({value:C[i].value,name:i},C,"login")),0!==C[i].errors.length&&(s=!1);if(!s){t.next=15;break}return t.next=7,V(c);case 7:return o=t.sent,t.next=10,o.json();case 10:l=t.sent,u=l.accessToken,j=l.message,d(j),o.ok?setTimeout((function(){n.refreshToken(u),r(),e.push("/rooms")}),2e3):setTimeout((function(){d("")}),5e3);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"container-base mt-4",children:Object(u.jsxs)(O.a,{className:"form-base",children:[Object(u.jsx)("h1",{className:"text-center mt-3 mb-4",children:"Login"}),Object(u.jsxs)(f.a,{className:"justify-content-center",children:[Object(u.jsxs)(x.a,{xs:11,md:8,lg:6,children:[Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"email",name:"email",isInvalid:C.email.inValid,placeholder:"Email",onBlur:function(e){T(g(e.target,C,"login"))}}),C.email.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"password",name:"password",isInvalid:C.password.inValid,placeholder:"Password",onBlur:function(e){T(g(e.target,C,"login"))}}),C.password.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsxs)(f.a,{className:"btn-link-base mb-3",children:[Object(u.jsx)(v.a,{className:"btn-login",variant:"dark",type:"submit",onClick:function(e){!function(e){P.apply(this,arguments)}(e)},children:"Login"}),Object(u.jsx)(D.b,{className:"link-forgot text-center",to:"/forgotPassword",children:"Forgot Password ?"})]})]}),Object(u.jsx)(f.a,{className:"message-base justify-content-center align-items-center mb-3",children:j&&Object(u.jsx)("small",{children:j})})]})]})})})},_=n(331),H=n(332);function W(){return U.a.decode(q)}function K(e){var t;return t=e.slice(0,10).split("-").reverse().join("/"),e.slice(11,16)+" "+t}var Q=function(){var e=Object(i.g)(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.isLoggedIn}));if(n)var a=W().userName;function r(){t({type:"LOGOUT"}),e.push("/"),function(){G.apply(this,arguments)}()}return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(_.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",className:"Nav-Bar",children:[Object(u.jsx)(_.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(u.jsxs)(_.a.Collapse,{id:"responsive-navbar-nav",children:[!n&&Object(u.jsxs)(H.a,{children:[Object(u.jsx)(D.c,{to:"/register",className:"nav-link nav-auth",children:"Register"}),Object(u.jsx)(D.c,{to:"/login",className:"nav-link nav-auth",children:"Login"})]}),n&&Object(u.jsxs)(_.a.Collapse,{className:"link-rooms",children:[Object(u.jsxs)(H.a,{children:[Object(u.jsx)(D.c,{to:"/rooms",className:"nav-link nav-auth",children:"Chat Rooms"}),Object(u.jsx)(D.c,{to:"/createRoom",className:"nav-link nav-auth",children:"Create Room"})]}),Object(u.jsxs)(H.a,{className:"",children:[Object(u.jsx)("div",{className:"userName-nav",children:Object(u.jsxs)("b",{children:["Hello, ",a]})}),Object(u.jsx)(D.c,{to:"/",className:"nav-link nav-auth",onClick:function(){return r()},children:"Logout"})]})]})]})]})})};var X=function(){w.inValid=!1,w.errors=[];var e=Object(a.useState)({email:Object(h.a)(Object(h.a)({},w),{},{inValid:!1,value:"",error:[]})}),t=Object(p.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(p.a)(s,2),i=c[0],o=c[1];function j(){return(j=Object(b.a)(m.a.mark((function e(t){var a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=!0,r(g({value:n.email.value,name:"email"},n,"forgotPassword")),0!==n.email.errors.length&&(a=!1),!a){e.next=11;break}return e.next=7,R({email:n.email.value});case 7:s=e.sent,c=s.message,o(c),setTimeout((function(){o("")}),4e3);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"container-base mt-4",children:Object(u.jsxs)(O.a,{className:"form-base",children:[Object(u.jsx)("h1",{className:"text-center mt-3 mb-4",children:"Forgot Password"}),Object(u.jsxs)(f.a,{className:"justify-content-center",children:[Object(u.jsxs)(x.a,{xs:11,md:8,lg:6,children:[Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"email",name:"email",isInvalid:n.email.inValid,placeholder:"Email",onBlur:function(e){r(g(e.target,n,"forgotPassword"))}}),n.email.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)(v.a,{className:"btn-base mb-3",variant:"dark",type:"submit",onClick:function(e){!function(e){j.apply(this,arguments)}(e)},children:"Submit"})})]}),Object(u.jsx)(f.a,{className:"message-base justify-content-center align-items-center mb-3",children:i&&Object(u.jsx)("small",{children:i})})]})]})})})};var Y=function(){var e=Object(i.i)().token,t=Object(i.g)(),n=Object(a.useState)({password:Object(h.a)(Object(h.a)({},y),{},{inValid:!1,value:"",error:[]}),confirmPassword:Object(h.a)(Object(h.a)({},k),{},{inValid:!1,value:"",error:[]})}),r=Object(p.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(""),j=Object(p.a)(o,2),d=j[0],N=j[1];function w(){return(w=Object(b.a)(m.a.mark((function n(a){var r,i,o,l,u,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in a.preventDefault(),r=!0,i={},s)i[o]=s[o].value,c(g({value:s[o].value,name:o},s,"login")),0!==s[o].errors.length&&(r=!1);if(!r){n.next=15;break}return i.token=e,n.next=8,B(i);case 8:return l=n.sent,n.next=11,l.json();case 11:u=n.sent,j=u.message,N(j),l.ok?setTimeout((function(){N(""),t.push("/login")}),3e3):setTimeout((function(){N("")}),3e3);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"container-base mt-4",children:Object(u.jsxs)(O.a,{className:"form-base",children:[Object(u.jsx)("h1",{className:"text-center mt-3 mb-4",children:"Reset Password"}),Object(u.jsxs)(f.a,{className:"justify-content-center",children:[Object(u.jsxs)(x.a,{xs:11,md:8,lg:6,children:[Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"password",name:"password",isInvalid:s.password.inValid,placeholder:"Password",onBlur:function(e){c(g(e.target,s,"resetPassword"))}}),s.password.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsxs)(O.a.Group,{className:"input-base",children:[Object(u.jsx)(O.a.Control,{type:"password",name:"confirmPassword",isInvalid:s.confirmPassword.inValid,placeholder:"Confirm Password",onBlur:function(e){c(g(e.target,s,"resetPassword"))}}),s.confirmPassword.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)(v.a,{className:"btn-base mb-3",variant:"dark",type:"submit",onClick:function(e){return function(e){return w.apply(this,arguments)}(e)},children:"Submit"})})]}),Object(u.jsx)(f.a,{className:"message-base justify-content-center align-items-center mb-3",children:d&&Object(u.jsx)("small",{children:d})})]})]})})})},ee=n(330);var te=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:" text-center mt-5",children:"Loading"}),Object(u.jsx)(f.a,{className:"justify-content-center",children:Object(u.jsx)(ee.a,{animation:"border",variant:"dark"})})]})};var ne=function(){var e=Object(a.useContext)(M),t=Object(o.b)();return Object(a.useEffect)((function(){Object(b.a)(m.a.mark((function n(){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I();case 2:a=n.sent,(r=a.accessToken)?(t({type:"LOGIN"}),e.refreshToken(r)):t({type:"LOGOUT"}),setTimeout((function(){t({type:"START"})}),350);case 6:case"end":return n.stop()}}),n)})))()}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(te,{})})},ae="https://chat-rooms-web.herokuapp.com/api";function re(e){return se.apply(this,arguments)}function se(){return(se=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"/rooms"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"/rooms?roomName=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"/rooms/messages/?id=").concat(t,"&skip=").concat(n));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return je.apply(this,arguments)}function je(){return(je=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"/rooms/users/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"/rooms/changeViewed"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(){var e=Object(i.g)(),t=W().id,n=Object(a.useState)(""),r=Object(p.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)({roomName:C}),j=Object(p.a)(o,2),d=j[0],h=j[1];function N(){return(N=Object(b.a)(m.a.mark((function n(a){var r,s,i,o,l,u;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(i in a.preventDefault(),r=!0,s={},d)s[i]=d[i].value,h(g({value:d[i].value,name:i},d)),0!==d[i].errors.length&&(r=!1);if(!r){n.next=15;break}return s.admin=t,n.next=8,re(s);case 8:return o=n.sent,n.next=11,o.json();case 11:l=n.sent,u=l.message,c(u),o.ok?setTimeout((function(){e.push("/rooms")}),2e3):setTimeout((function(){c("")}),4e3);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"container-base mt-4",children:Object(u.jsxs)(O.a,{className:"form-base",children:[Object(u.jsx)("h1",{className:"text-center mt-3 mb-4",children:"Create Room"}),Object(u.jsxs)(f.a,{className:"justify-content-center mt-5 ",children:[Object(u.jsx)(x.a,{className:"input-create-room",xs:11,md:7,lg:5,children:Object(u.jsxs)(O.a.Group,{children:[Object(u.jsx)(O.a.Control,{id:"roomName",type:"text",name:"roomName",isInvalid:d.roomName.inValid,placeholder:"Room Name",onBlur:function(e){h(g(e.target,d))}}),d.roomName.errors.map((function(e,t){return Object(u.jsxs)(O.a.Control.Feedback,{className:"feedback",type:"invalid",children:[" ",e," "]},t)}))]})}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)(v.a,{className:"btn-base mb-3 mt-5",variant:"dark",type:"submit",onClick:function(e){return function(e){return N.apply(this,arguments)}(e)},children:"Create"})}),Object(u.jsx)(f.a,{className:"message-base justify-content-center align-items-center mb-3",children:s&&Object(u.jsx)("small",{children:s})})]})]})})})};var be=function(e){var t=e.room,n=Object(i.g)();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"room-card",children:[Object(u.jsx)("h5",{className:"text-center",children:t.roomName}),Object(u.jsx)("hr",{className:"mb-4"}),Object(u.jsxs)("p",{children:["Admin : ",t.admin.name]}),Object(u.jsx)("p",{className:"inside-room",onClick:function(){return n.push("/room/".concat(t.roomName),t)},children:Object(u.jsx)("b",{children:"Get Inside"})})]})})},he=n(181),pe=n(182);var Oe,fe=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(p.a)(s,2),i=c[0],o=c[1],j=Object(a.useState)(!0),d=Object(p.a)(j,2),h=d[0],O=d[1];return Object(a.useEffect)((function(){var e=setTimeout(Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,ce(i);case 3:t=e.sent,r(t),setTimeout((function(){O(!1)}),400);case 6:case"end":return e.stop()}}),e)}))),900);return function(){clearTimeout(e)}}),[i]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"header text-center",children:"Chat Rooms"}),Object(u.jsxs)(l.a,{children:[Object(u.jsx)("div",{className:" mb-4 d-flex justify-content-center",children:Object(u.jsxs)("div",{className:"search-rooms d-flex col-10 col-lg-4 col-md-6",children:[Object(u.jsx)("input",{className:"search-input",type:"text",placeholder:"Search Room",onChange:function(e){return o(e.target.value.trim())}}),Object(u.jsx)(he.a,{icon:pe.a,className:"icon-search"})]})}),!h&&0!==n.length&&Object(u.jsx)(f.a,{children:n.map((function(e,t){return Object(u.jsx)(x.a,{xs:9,md:6,lg:4,className:"mb-3 mx-auto mx-md-0",children:Object(u.jsx)(be,{room:e})},t)}))}),!h&&0===n.length&&Object(u.jsx)(f.a,{children:Object(u.jsx)("h3",{className:"text-center",children:"No Results"})}),h&&Object(u.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[Object(u.jsx)("h6",{className:"text-center",children:"Loading"}),Object(u.jsx)(ee.a,{animation:"grow",size:"sm",className:"mx-2 my-auto"})]})]})]})},xe=n(70),ve=n(191),ge=n(187),Ne=n.n(ge),we=n(188),ye=n(189),ke=n(190),Ce=!0;var Te=function(){var e=Object(a.useRef)(),t=W(),n=t.id,r=t.userName,s=Object(i.h)().state,c=Object(a.useState)(s),o=Object(p.a)(c,2),j=o[0],d=(o[1],Object(a.useState)(r)),O=Object(p.a)(d,2),x=O[0],v=(O[1],Object(a.useState)(!0)),g=Object(p.a)(v,2),N=g[0],w=g[1],y=Object(a.useState)([]),k=Object(p.a)(y,2),C=k[0],T=k[1],P=Object(a.useState)(!0),S=Object(p.a)(P,2),V=S[0],F=S[1],I=Object(a.useState)(""),L=Object(p.a)(I,2),G=L[0],R=L[1],E=Object(a.useState)([]),B=Object(p.a)(E,2),A=B[0],z=B[1];function D(){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(j.id);case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return q.apply(this,arguments)}function q(){return(q=Object(b.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,oe(j.id,t-1);case 3:n=e.sent,a=n.lastData,r=n.nextMessages,setTimeout((function(){z([].concat(Object(xe.a)(r),Object(xe.a)(A))),w(!1),M(r)}),300),a&&(Ce=!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.map((function(e){if(e.user!==x&&!1===e.view)return e.view=!0,{id:e._id,userName:e.user}})).filter((function(e){return void 0!==e}));t.length>0&&(Oe.emit("changeViewedMessages",{room:j,messagesChanged:t},(function(){})),function(e){de.apply(this,arguments)}(t))}return Object(a.useEffect)((function(){!function(){var t;null===(t=e.current)||void 0===t||t.scrollIntoView({})}()}),[V]),Object(a.useEffect)((function(){D(),U(1)}),[]),Object(a.useEffect)((function(){return(Oe=Object(ve.a)("https://chat-rooms-web.herokuapp.com")).emit("join",{id:n,name:x,room:j},(function(){})),function(){Oe.emit("disconnection",{name:x,room:j},(function(){})),Oe.off()}}),[]),Object(a.useEffect)((function(){Oe.on("message",(function(e){var t=e.message;""===t.user&&""===t.text?D():""===t.user&&""!==t.text?(D(),z((function(e){return[].concat(Object(xe.a)(e),[t])}))):(z((function(e){return[].concat(Object(xe.a)(e),[t])})),F((function(e){return!e})))}))}),[]),Object(a.useEffect)((function(){Oe.on("changeViewed",(function(e){var t=e.messagesChanged.map((function(e){if(e.userName===x)return e.id}));z((function(e){return e.map((function(e){return t.includes(e._id)?Object(h.a)(Object(h.a)({},e),{},{view:!0}):e}))}))}))}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{children:Object(u.jsxs)(f.a,{className:"justify-content-center chat",children:[Object(u.jsx)("div",{className:"chat-header",children:Object(u.jsx)("h4",{className:"text-center mt-2",children:"Chat Room"})}),Object(u.jsxs)("div",{className:"chat-body",children:[Object(u.jsxs)("div",{className:"chat-side-bar",children:[Object(u.jsxs)("div",{className:"name-room",children:[Object(u.jsx)(we.a,{size:25,className:"icon-msg"})," ",Object(u.jsx)("h6",{children:"Room Name :"})]}),Object(u.jsx)("div",{className:"header-room",children:Object(u.jsx)("h4",{className:"text-center",children:j.roomName})}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"name-room mb-2",children:[Object(u.jsx)(ye.a,{size:25,className:"icon-msg"}),Object(u.jsx)("h6",{children:"Users :"})]}),Object(u.jsx)("div",{className:"users-room",children:C.map((function(e,t){return Object(u.jsx)("p",{children:e.userName},t)}))})]})]}),Object(u.jsxs)("div",{className:"chat-message-textArea",children:[Object(u.jsx)(Ne.a,{className:"chat-messages",hasMore:Ce,isLoading:N,loadMore:U,loadArea:50,children:A.map((function(t,n){return Object(u.jsx)("div",{ref:n===A.length-1?e:null,className:"chat-out ".concat(t.user===x?"left":"right"),children:Object(u.jsxs)("span",{className:"chat-rectangle ".concat(t.user===x?"my-color":"other-color"),children:[t.user&&Object(u.jsxs)("p",{className:"chat-rectangle-name-date my-0 pt-1 pb-0",children:[" ",Object(u.jsx)("span",{children:t.user})," ",Object(u.jsx)("span",{children:K(t.date)})]}),Object(u.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(u.jsx)("p",{className:"chat-rectangle-message",children:t.text}),t.user===x&&Object(u.jsx)(ke.a,{size:30,className:"".concat(t.view?"icon-v-view":"icon-v-not-view"," mt-0 mb-0")})]})]})},n)}))}),Object(u.jsxs)("div",{className:"textarea-message",children:[Object(u.jsx)("textarea",{className:"textArea",rows:"2",value:G,onChange:function(e){return R(e.target.value)}}),Object(u.jsx)("button",{className:"btn-message",variant:"primary",onClick:function(){var e;G.trim()&&(e=C.length>1,Oe.emit("sendMessage",{name:x,room:j,message:G,view:e},(function(){})),R(""))},children:"Send"})]})]})]}),Object(u.jsx)("div",{className:"chat-footer",children:Object(u.jsxs)("p",{children:["Admin : ",j.admin.name]})})]})})})};var Pe=function(){var e=Object(o.c)((function(e){return e.isLoggedIn}));return Object(o.c)((function(e){return e.loader}))?Object(u.jsx)(ne,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Q,{}),Object(u.jsxs)(i.d,{children:[Object(u.jsxs)(i.b,{exact:!0,path:"/",children:[!e&&Object(u.jsx)(j,{}),e&&Object(u.jsx)(i.a,{to:"/rooms"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/register",children:[!e&&Object(u.jsx)(z,{}),e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/login",children:[!e&&Object(u.jsx)($,{}),e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/forgotPassword",children:[!e&&Object(u.jsx)(X,{}),e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/resetPassword/:token",children:[!e&&Object(u.jsx)(Y,{}),e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/createRoom",children:[e&&Object(u.jsx)(me,{}),!e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/rooms",children:[e&&Object(u.jsx)(fe,{}),!e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsxs)(i.b,{exact:!0,path:"/room/:name",children:[e&&Object(u.jsx)(Te,{}),!e&&Object(u.jsx)(i.a,{to:"/"})]}),Object(u.jsx)(i.b,{path:"*",children:Object(u.jsx)(i.a,{to:"/"})})]})]})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,334)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},Ve=n(192),Fe={isLoggedIn:0,loader:!0},Ie=Object(Ve.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;return"LOGIN"===t.type?Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!0}):"LOGOUT"===t.type?Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!1}):"LOADING"===t.type?Object(h.a)(Object(h.a)({},e),{},{loader:!0}):"START"===t.type?Object(h.a)(Object(h.a)({},e),{},{loader:!1}):e})),Le=Ie;c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(o.a,{store:Le,children:Object(u.jsx)(D.a,{children:Object(u.jsx)(Z,{children:Object(u.jsx)(Pe,{})})})})}),document.getElementById("root")),Se()}},[[325,1,2]]]);
//# sourceMappingURL=main.d8cadecf.chunk.js.map